<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="chandler-registration-form.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">


<dom-module id="chandler-registration">
  <template>
    <style include="shared-styles">
      :host {        
        display: block;
        padding: 10px;        
      }
    </style>

    <iron-ajax            
      id="xhr"
      method="post"
      url="http://localhost:3000/sessions"
      content-type="application/json"      
      last-response="{{ response }}"></iron-ajax>

    <chandler-registration-form on-sign-up-btn-pressed="_signUpPressed"></chandler-registration-form>

  </template>

  <script>
    class ChandlerRegistration extends Polymer.Element {
      static get is() { return 'chandler-registration'; }
      static get properties() { return { }}

      _signUpPressed(e) {
        console.log(e.detail.user);
        this.$.xhr.body = e.detail.user;
        this.$.xhr.generateRequest();
      }      
    }

    window.customElements.define(ChandlerRegistration.is, ChandlerRegistration);
  </script>
</dom-module>
